**Rancher管理平台**

**1. 启动镜像**

    docker run -di --name=rancher -p 8080:8080 rancher/server


访问：{ip}:port/8080

如

    http://47.112.142.231:8080


**2. 管理容器**


**添加环境**

![](../Images/6.png)

![](../Images/7.png)

![](../Images/8.png)


---

**配置该环境下的变量**

--1.选择环境
![](../Images/9.png)

---

--2.配置主机
![](../Images/10.png)


![](../Images/11.png)

复制上图步骤5的命令到客户端执行，执行安装Rancher代理：

    sudo docker run -e CATTLE_AGENT_IP="47.112.142.231"  --rm --privileged -v /var/run/docker.sock:/var/run/docker.sock -v /var/lib/rancher:/var/lib/rancher rancher/agent:v1.2.11 http://47.112.142.231:8080/v1/scripts/06D781E77E42560E87DE:1546214400000:FuHMAPZNdf1auQulyUaM4AUifRo


下载安装完毕后，点击上图“关闭”按钮

等待一段时间后，主机添加完毕

![](../Images/12.png)

---

--3.配置应用

![](../Images/13.png)


![](../Images/14.png)


--4 修改Image tag

进入docker服务器，修改tag:

    docker tag zheyi_eureka:latest docker.io/zheyi_eureka:latest

 	docker tag zheyi_article:latest docker.io/zheyi_article:latest

 	docker tag zheyi_zuul:latest docker.io/zheyi_zuul:latest


--5.配置服务

![](../Images/15.png)



添加eureka服务


![](../Images/16.png)


在上图的名称处分别填入eureka, zuul, article

在上图的“选择镜像”处分别填入zheyi_eureka, zheyi_zuul, zheyi_article

端口各自选择

记住：创建前总是拉取镜像按钮不能勾选。


创建后，可以在图像界面看到如下内如：

![](../Images/18.png)


此时在docker服务器中，也成功创建容器：

![](../Images/19.png)


**3.验证是否成功**

    http://47.112.142.231:7000/
    
    http://47.112.142.231:9001/article
    
    http://47.112.142.231:8888/app/article







