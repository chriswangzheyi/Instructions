# 12. 新的数据模拟器使用

## 上传文件

上传 datagen.jar 和 genlog.sh 至服务器，


## 生成用户日志

生成10000条用户日志：

	sh genlog.sh user 10000 /home/zheyi/users.txt

得到：	
	
	{"account":"sgdl ybw","appid":"cn.doitedu.study.Yiee","appversion":"7.2","carrier":"中国移动","deviceid":"FCSLMGKJFTXN","devicetype":"MI-MIX","ip":"20.35.121.176","latitude":41.17184586239272,"longitude":80.2699230227924,"nettype":"4G","osname":"android","osversion":"9.0","releasechannel":"百度手机助手","resolution":"1920*1080","timestamp":0}
	{"account":"do_gf","appid":"cn.doitedu.jobs.JobHunter","appversion":"6.9","carrier":"中国电信","deviceid":"JANDCYICGVRN","devicetype":"MEIZU-ML7","ip":"168.161.21.75","latitude":45.29385704528718,"longitude":130.9704259146724,"nettype":"5G","osname":"android","osversion":"9.5","releasechannel":"TapTap","resolution":"2048*1024","timestamp":0}
	{"account":"ckf_qfi","appid":"cn.doitedu.study.Yiee","appversion":"6.8","carrier":"中国联通","deviceid":"OKQCYTDAVEIB","devicetype":"REDMI-5","ip":"109.160.29.93","latitude":43.57977017462791,"longitude":125.30966736779712,"nettype":"5G","osname":"android","osversion":"6.5","releasechannel":"柠檬助手","resolution":"1024*768","timestamp":0}
	{"account":"zx,ci","appid":"cn.doitedu.jobs.JobHunter","appversion":"8.0","carrier":"中国联通","deviceid":"GVDLFGYQFYMA","devicetype":"GALAXY-6","ip":"155.99.6.167","latitude":34.03597781473098,"longitude":115.00797847789744,"nettype":"4G","osname":"android","osversion":"8.5","releasechannel":"酷市场-CoolMar","resolution":"2048*768","timestamp":0}
	{"account":"伍民","appid":"cn.doitedu.jobs.JobHunter","appversion":"8.3","carrier":"爱奇艺移动","deviceid":"WOJEVDSINXXP","devicetype":"IPHONE-9","ip":"126.59.68.171","latitude":43.79159047411517,"longitude":87.71903278012913,"nettype":"5G","osname":"ios","osversion":"8.6","releasechannel":"酷市场-CoolMar","resolution":"1024*768","timestamp":0}
	{"account":"zzb,rma","appid":"cn.doitedu.jobs.JobHunter","appversion":"8.0","carrier":"中国移动","deviceid":"TRNGRRIIBVGR","devicetype":"REDMI-NOTE","ip":"157.193.178.33","latitude":26.660333791733343,"longitude":115.09090118949715,"nettype":"5G","osname":"android","osversion":"7.5","releasechannel":"手尚手机网","resolution":"1920*1080","timestamp":0}
	{"account":"yh_nu","appid":"cn.doitedu.study.Yiee","appversion":"7.6","carrier":"小米移动","deviceid":"PQCXOSLURMRD","devicetype":"HUAWEI-RY-10","ip":"189.101.60.5","latitude":34.12389010140454,"longitude":117.89223179824296,"nettype":"5G","osname":"android","osversion":"7.8","releasechannel":"华为应用市场","resolution":"1024*768","timestamp":0}
	{"account":"诸葛历","appid":"cn.doitedu.study.Yiee","appversion":"7.5","carrier":"中国联通","deviceid":"EJCSPZWGUTHL","devicetype":"IPHONE-6","ip":"153.0.8.19","latitude":32.582791432906916,"longitude":110.87422095634001,"nettype":"4G","osname":"ios","osversion":"8.8","releasechannel":"当贝市场","resolution":"1024*768","timestamp":0}
	{"account":"qag,gv","appid":"cn.doitedu.study.Yiee","appversion":"7.5","carrier":"中国移动","deviceid":"AEWUDHCICURJ","devicetype":"GALAXY-3","ip":"116.90.153.16","latitude":40.77674661855919,"longitude":107.44077865025123,"nettype":"4G","osname":"android","osversion":"7.5","releasechannel":"天翼空间","resolution":"1024*768","timestamp":0}
	{"account":"fkso owaz","appid":"cn.doitedu.study.Yiee","appversion":"7.2","carrier":"中国联通","deviceid":"HAKBONLFLURO","devicetype":"REDMI-5","ip":"77.50.160.85","latitude":38.4370256445942,"longitude":110.5527653892748,"nettype":"WIFI","osname":"android","osversion":"6.5","releasechannel":"百度手机助手","resolution":"1024*768","timestamp":0}	

## 生成用户行为日志

生成日活10000人的用户行为日志：

	sh genlog.sh log 10000 2022-10-25_00:00:00 1 /home/zheyi/users.txt /home/zheyi/ 1
	
生成文件：（app.access.log.2022-10-25）

得到：

	{"account":"","appid":"cn.doitedu.jobs.JobHunter","appversion":"7.2","carrier":"中国联通","deviceid":"VHBIVWAWIGWP","devicetype":"MI-NOTE","eventid":"launch","ip":"27.57.10.191","latitude":27.57830180708845,"longitude":119.29458743517024,"nettype":"5G","osname":"android","osversion":"8.5","properties":{},"releasechannel":"最美应用","resolution":"1024*768","timestamp":1666627218125}
	{"account":"","appid":"cn.doitedu.jobs.JobHunter","appversion":"7.2","carrier":"中国联通","deviceid":"VHBIVWAWIGWP","devicetype":"MI-NOTE","eventid":"categoryClick","ip":"27.57.10.191","latitude":27.57830180708845,"longitude":119.29458743517024,"nettype":"5G","osname":"android","osversion":"8.5","properties":{"refUrl":"/jobs/job0294.html","pageId":"sea0846","url":"/search/sea0846.html","categoryId":"014"},"releasechannel":"最美应用","resolution":"1024*768","sessionid":"jekreoor","timestamp":1666627224628}
	{"account":"","appid":"cn.doitedu.jobs.JobHunter","appversion":"7.2","carrier":"中国联通","deviceid":"VHBIVWAWIGWP","devicetype":"MI-NOTE","eventid":"pageView","ip":"27.57.10.191","latitude":27.57830180708845,"longitude":119.29458743517024,"nettype":"5G","osname":"android","osversion":"8.5","properties":{"refUrl":"/students/stu0087.html","pageId":"stu0974","url":"/students/stu0974.html"},"releasechannel":"最美应用","resolution":"1024*768","sessionid":"jekreoor","timestamp":1666627227668}
	{"account":"","appid":"cn.doitedu.jobs.JobHunter","appversion":"7.2","carrier":"中国联通","deviceid":"VHBIVWAWIGWP","devicetype":"MI-NOTE","eventid":"search","ip":"27.57.10.191","latitude":27.57830180708845,"longitude":119.29458743517024,"nettype":"5G","osname":"android","osversion":"8.5","properties":{"productId":"00811","refUrl":"/search/sea0903.html","pageId":"s","url":"/search/s?","keyWord":"希而拍纸"},"releasechannel":"最美应用","resolution":"1024*768","sessionid":"jekreoor","timestamp":1666627229826}
	{"account":"","appid":"cn.doitedu.jobs.JobHunter","appversion":"7.2","carrier":"中国联通","deviceid":"VHBIVWAWIGWP","devicetype":"MI-NOTE","eventid":"adClick","ip":"27.57.10.191","latitude":27.57830180708845,"longitude":119.29458743517024,"nettype":"5G","osname":"android","osversion":"8.5","properties":{"adId":"032","refUrl":"/courses/kylin/c085.html","pageId":"stu0214","url":"/students/stu0214.html"},"releasechannel":"最美应用","resolution":"1024*768","sessionid":"jekreoor","timestamp":1666627244184}
	{"account":"","appid":"cn.doitedu.jobs.JobHunter","appversion":"7.2","carrier":"中国联通","deviceid":"VHBIVWAWIGWP","devicetype":"MI-NOTE","eventid":"collect","ip":"27.57.10.191","latitude":27.57830180708845,"longitude":119.29458743517024,"nettype":"5G","osname":"android","osversion":"8.5","properties":{"itemId":"00649","refUrl":"/contacts/con0668.html","pageId":"sha0712","url":"/shares/sha0712.html"},"releasechannel":"最美应用","resolution":"1024*768","sessionid":"jekreoor","timestamp":1666627257942}
	{"account":"","appid":"cn.doitedu.jobs.JobHunter","appversion":"7.2","carrier":"中国联通","deviceid":"VHBIVWAWIGWP","devicetype":"MI-NOTE","eventid":"collect","ip":"27.57.10.191","latitude":27.57830180708845,"longitude":119.29458743517024,"nettype":"5G","osname":"android","osversion":"8.5","properties":{"itemId":"00530","refUrl":"/items/ite0404.html","pageId":"ite0344","url":"/items/ite0344.html"},"releasechannel":"最美应用","resolution":"1024*768","sessionid":"jekreoor","timestamp":1666627271386}
	{"account":"","appid":"cn.doitedu.jobs.JobHunter","appversion":"7.2","carrier":"中国联通","deviceid":"VHBIVWAWIGWP","devicetype":"MI-NOTE","eventid":"adClick","ip":"27.57.10.191","latitude":27.57830180708845,"longitude":119.29458743517024,"nettype":"5G","osname":"android","osversion":"8.5","properties":{"adId":"016","refUrl":"/search/sea0764.html","pageId":"job0864","url":"/jobs/job0864.html"},"releasechannel":"最美应用","resolution":"1024*768","sessionid":"jekreoor","timestamp":1666627287940}
	{"account":"lxqx.zaq","appid":"cn.doitedu.study.Yiee","appversion":"6.8","carrier":"中国移动","deviceid":"PNFPMYNYLNLT","devicetype":"MI-6","eventid":"launch","ip":"72.117.137.117","latitude":25.615668701379487,"longitude":119.75212192167663,"nettype":"4G","osname":"android","osversion":"6.5","properties":{},"releasechannel":"应用超市","resolution":"1024*768","timestamp":1666627210990}
	{"account":"lxqx.zaq","appid":"cn.doitedu.study.Yiee","appversion":"6.8","carrier":"中国移动","deviceid":"PNFPMYNYLNLT","devicetype":"MI-6","eventid":"fetchCoupon","ip":"72.117.137.117","latitude":25.615668701379487,"longitude":119.75212192167663,"nettype":"4G","osname":"android","osversion":"6.5","properties":{"refUrl":"/students/stu0065.html","pageId":"sea0139","couponId":"010","url":"/search/sea0139.html"},"releasechannel":"应用超市","resolution":"1024*768","sessionid":"qljfjlrx","timestamp":1666627217034}
	
## 加载日志到HDFS中

	hdfs dfs -mkdir /logdata/app/2022-10-25
	hdfs dfs -put /home/zheyi/app.access.log.2022-10-25 /logdata/app/2022-10-25/



