# 01.环境准备

## 准备三台服务器

* titan1: 192.168.3.111
* titan2: 192.168.3.112
* titan3: 192.168.3.113

## 准备好mysql

### 安装
登录192.168.3.111

#### 安装步骤

详见mysql 《mysql单节点安装》

### 初始化数据

	create database realtimedw; 
	
#### 执行脚本

用navicat连接mysql数据库，导入下面两个sql ( 项目所需资源-日志数据模拟器-初始化数据)

	realtimedw.sql
	t_md_areas.sql

#### 其他数据准备

	mkdir /root/loginit

放入：

	area.txt
	eventIds.txt
	phoneinfo.txt
	releasechannel.txt
	
#### 对jar包内容进行修改 （log_gen_app.jar，log_gen_wx.jar）

other.properties

	  #logger,kafka
	  sink.type=logger
	  
	  #roll  console dayroll
	  logger.type=dayroll
	  initdata.releasechannel=/root/loginit/releasechannel.txt
	  initdata.phoneinfo=/root/loginit/phoneinfo.txt
	  initdata.eventIds=/root/loginit/eventIds.txt
	  init.user.area=/root/loginit/area.txt
	  db.url=jdbc:mysql://127.0.0.1:3306/realtimedw?
	  useUnicode=true&characterEncoding=utf8&useSSL=false
	  db.user=root
	  db.password=ABC123abc.123
	  
	  # max concurrent accessor amount
	  online.max.num=100
	  
log4j.properties

	  log4j.logger.dayroll = INFO,DailyRolling
	  log4j.additivity.dayroll=false
	  log4j.appender.DailyRolling=org.apache.log4j.DailyRollingFileAppender
	  log4j.appender.DailyRolling.File=/loggen/logdata/wx/event_log_
	  log4j.appender.DailyRolling.DatePattern=yyyy‐MM‐dd'.log'
	  log4j.appender.DailyRolling.layout=org.apache.log4j.PatternLayout
	  log4j.appender.DailyRolling.layout.ConversionPattern=%m%n
	  
#### 启动模拟器

上传jar包

	log_gen_app.jar	log_gen_wx.jar
	
执行：
	
  	# 启动微信小程序端日志模拟器
	java ‐cp log_gen.jar cn.doitedu.loggen.entry.GenWxAppLog
	# 启动app端日志模拟器
	java ‐cp log_gen2.jar cn.doitedu.loggen.entry.GenAppLog