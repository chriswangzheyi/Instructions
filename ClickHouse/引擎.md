# 引擎

## clickhous 默认数据库引擎

默认情况下ClickHouse使用自己的数据库引擎，该默认引擎提供可配置的数据库引擎和所有支持的SQL语法.

## clickhouse mysql 引擎

也可以指定使用mysql的引擎,就是可以在clickhouse中调用mysql 中的数据,进行查询,

### clickhouse链接到mysql数据库时可以做的事:

① 可以执行insert 和select 的操作, 也可以执行show tables; 和show create table_name;

② 也可以进行clickhouse和mysql之间的交互;


### clickhouse链接到mysql数据库不能做的事: 

① rename

② create table 

③ alter 

### 使用mysql引擎创建clickhouse数据库

	CREATE DATABASE 语法
	CREATE DATABASE [IF NOT EXISTS] db_name [ON CLUSTER cluster]
	ENGINE = MySQL('host:port', ['database' | database], 'user', 'password')
	 
	MySQL数据库引擎参数
	host:port — 链接的MySQL地址。
	database — 链接的MySQL数据库。
	user — 链接的MySQL用户。
	password — 链接的MySQL用户密码。

	# 实例
	CREATE DATABASE IF NOT EXISTS db_mysql_ch ENGINE = MySQL('192.168.12.118:3306', 'ezp-bigdata', 'root', '123456')


##clickhouse lazy 引擎

也可以使用 lazy引擎.


## TinyLog引擎（数据不分快）

若使用的数据量小于100万，面对的数据查询场景也比较简单，并且往往是一次写入多次查询，则日志家族系列的表引擎将会是一种不错的选择。TinyLog是最简单的表引擎，用于将数据存储在磁盘上。每列都存储在单独的压缩文件中，写入时，数据将附加到文件末尾。

	Clickhouse> create table default.t_tinylog(id bigint,code bigint)engine=TinyLog();
	Clickhouse> insert into table default.t_tinylog select number,number+1 from numbers(100);
 
查看表结构：

	# ls -l /var/lib/clickhouse/data/default/t_tinylog/
	total 12
	-rw-r-----. 1 clickhouse clickhouse 432 Jul 31 00:34 code.bin
	-rw-r-----. 1 clickhouse clickhouse 430 Jul 31 00:34 id.bin
	-rw-r-----. 1 clickhouse clickhouse  66 Jul 31 00:34 sizes.json
 
	# cat /var/lib/clickhouse/data/default/t_tinylog/sizes.json 
	{"yandex":{"code%2Ebin":{"size":"432"},"id%2Ebin":{"size":"430"}}}