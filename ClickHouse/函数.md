# 函数

## 条件函数

	create table if not exists tb_if(
	uid Int16,
	name String ,
	gender String
	)engine = TinyLog ;

	insert into tb_if values(1,'zss1','M') ;
	insert into tb_if values(2,'zss2','M') ;
	insert into tb_if values(3,'zss3','F') ;
	insert into tb_if values(4,'zss4','O') ;
	insert into tb_if values(5,'zss5','F') ;


### 单条件

	SELECT
	*,
	if(gender = 'M', '男', '女')
	FROM tb_if ;

结果

	┌─uid─┬─name─┬─gender─┬─if(equals(gender, 'M'), '男', '女')─┐
	│   1 │ zss1 │ M      │ 男                                  │
	│   2 │ zss2 │ M      │ 男                                  │
	│   3 │ zss3 │ F      │ 女                                  │
	│   4 │ zss4 │ O      │ 女                                  │
	│   5 │ zss5 │ F      │ 女                                  │
	└─────┴──────┴────────┴─────────────────────────────────────┘

### 多条件判断语法

	SELECT
	*,
	multiIf(gender = 'M', '男', gender = 'F', '女', '保密') AS sex
	FROM tb_if;


结果

	┌─uid─┬─name─┬─gender─┬─sex──┐
	│   1 │ zss1 │ M      │ 男   │
	│   2 │ zss2 │ M      │ 男   │
	│   3 │ zss3 │ F      │ 女   │
	│   4 │ zss4 │ O      │ 保密 │
	│   5 │ zss5 │ F      │ 女   │
	└─────┴──────┴────────┴──────┘


## 数组

### 定义一个范围数组

	SELECT range(2, 10, 2)

结果

	┌─range(2, 10, 2)─┐
	│ [2,4,6,8]       │
	└─────────────────┘


### 定义数组

	select array(2 , 10 , 2) ;

结果

	┌─array(2, 10, 2)─┐
	│ [2,10,2]        │
	└─────────────────┘

### 数组排序

	select arrayReverseSort([1,4,3,2,6,77]);

结果

	┌─arrayReverseSort([1, 4, 3, 2, 6, 77])─┐
	│ [77,6,4,3,2,1]                        │
	└───────────────────────────────────────┘


### 函数式

	select arrayReverseSort((x)->-x,[1,4,3,2,6,77]);

结果

	┌─arrayReverseSort(lambda(tuple(x), negate(x)), [1, 4, 3, 2, 6, 77])─┐
	│ [1,2,3,4,6,77]                                                     │
	└────────────────────────────────────────────────────────────────────┘


### 数组去重

	select arrayDistinct([1,1,2,3,4,4]);

结果

	┌─arrayDistinct([1, 1, 2, 3, 4, 4])─┐
	│ [1,2,3,4]                         │
	└───────────────────────────────────┘


### 数组拉链操作

	select arrayZip(['a','b','c'],[5,2,1]);

	┌─arrayZip(['a', 'b', 'c'], [5, 2, 1])─┐
	│ [('a',5),('b',2),('c',1)]            │
	└──────────────────────────────────────┘

### 字符串切割

	select splitByChar(',','1,2,3,abcde');

	┌─splitByChar(',', '1,2,3,abcde')─┐
	│ ['1','2','3','abcde']           │
	└─────────────────────────────────┘


	select splitByString(',','1,2,3,abcde');

	┌─splitByString(',', '1,2,3,abcde')─┐
	│ ['1','2','3','abcde']             │
	└───────────────────────────────────┘


	select splitByString('','abcde');

	┌─splitByString('', 'abcde')─┐
	│ ['a','b','c','d','e']      │
	└────────────────────────────┘

## 随机数据和随机字符串

	select rand(),rand(1),rand(number),randConstant(),randConstant(1),randonConstant(number) from number(3)