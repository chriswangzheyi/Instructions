# Springboot 秒杀系统

## 配置
springboot

## 数据库

创建一个数据库babytun，执行babytun.sql

## 微服务

![](../Images/1.png)

**GoodsController:**

	package com.wzy.springboot_seckill.controller;
	
	
	import com.wzy.springboot_seckill.entity.Goods;
	import com.wzy.springboot_seckill.service.GoodsService;
	import org.slf4j.Logger;
	import org.slf4j.LoggerFactory;
	import org.springframework.stereotype.Controller;
	import org.springframework.web.bind.annotation.GetMapping;
	import org.springframework.web.bind.annotation.ResponseBody;
	import org.springframework.web.servlet.ModelAndView;
	
	import javax.annotation.Resource;
	
	@Controller
	public class GoodsController {
	    Logger logger = LoggerFactory.getLogger(GoodsController.class);
	
	    @Resource
	    private GoodsService goodsService;
	
	    @GetMapping("/goods") //http://localhost/goods?gid=xxx
	    @ResponseBody
	    public ModelAndView showGoods(Long gid){
	        logger.info("gid:" + gid);
	        ModelAndView mav = new ModelAndView("/goodsview");
	        Goods goods = goodsService.getGoods(gid);
	
	        mav.addObject("goods", goods);
	        mav.addObject("covers", goodsService.findCovers(gid));
	        mav.addObject("details", goodsService.findDetails(gid));
	        mav.addObject("params", goodsService.findParams(gid));
	        return mav;
	    }
	}


**GoodsCoverDAO:**

	package com.wzy.springboot_seckill.dao;
	
	import com.wzy.springboot_seckill.entity.GoodsCover;
	
	import java.util.List;
	
	public interface GoodsCoverDAO {
	    public List<GoodsCover> findByGoodsId(Long goodsId);
	}

**GoodsDAO:**

	package com.wzy.springboot_seckill.dao;
	
	
	import com.wzy.springboot_seckill.entity.Goods;
	
	public interface GoodsDAO {
	    public Goods findById(Long goodsId);
	}

**GoodsDetailDAO:**

	package com.wzy.springboot_seckill.dao;
	
	import com.wzy.springboot_seckill.entity.GoodsDetail;
	
	import java.util.List;
	
	public interface GoodsDetailDAO {
	    public List<GoodsDetail> findByGoodsId(Long goodsId);
	}


**GoodsParamDAO:**

	package com.wzy.springboot_seckill.dao;
	
	import com.wzy.springboot_seckill.entity.GoodsParam;
	
	import java.util.List;
	
	public interface GoodsParamDAO {
	    public List<GoodsParam> findByGoodsId(Long goodsId);
	}


**Goods:**

	package com.wzy.springboot_seckill.entity;
	
	public class Goods {
	    private Long goodsId;
	    private String title;
	    private String subTitle;
	    private Float originalCost;
	    private Float currentPrice;
	    private Float discount;
	    private Integer isFreeDelivery;
	    private Long categoryId;
	
	    public Long getGoodsId() {
	        return goodsId;
	    }
	
	    public void setGoodsId(Long goodsId) {
	        this.goodsId = goodsId;
	    }
	
	    public String getTitle() {
	        return title;
	    }
	
	    public void setTitle(String title) {
	        this.title = title;
	    }
	
	    public String getSubTitle() {
	        return subTitle;
	    }
	
	    public void setSubTitle(String subTitle) {
	        this.subTitle = subTitle;
	    }
	
	    public Float getOriginalCost() {
	        return originalCost;
	    }
	
	    public void setOriginalCost(Float originalCost) {
	        this.originalCost = originalCost;
	    }
	
	    public Float getCurrentPrice() {
	        return currentPrice;
	    }
	
	    public void setCurrentPrice(Float currentPrice) {
	        this.currentPrice = currentPrice;
	    }
	
	    public Float getDiscount() {
	        return discount;
	    }
	
	    public void setDiscount(Float discount) {
	        this.discount = discount;
	    }
	
	    public Integer getIsFreeDelivery() {
	        return isFreeDelivery;
	    }
	
	    public void setIsFreeDelivery(Integer isFreeDelivery) {
	        this.isFreeDelivery = isFreeDelivery;
	    }
	
	    public Long getCategoryId() {
	        return categoryId;
	    }
	
	    public void setCategoryId(Long categoryId) {
	        this.categoryId = categoryId;
	    }
	}


**GoodsCover:**

	package com.wzy.springboot_seckill.entity;
	
	public class GoodsCover {
	    private Long gcId;
	    private Long goodsId;
	    private String gcPicUrl;
	    private String gcThumbUrl;
	    private Long gcOrder;
	
	    public Long getGcId() {
	        return gcId;
	    }
	
	    public void setGcId(Long gcId) {
	        this.gcId = gcId;
	    }
	
	    public Long getGoodsId() {
	        return goodsId;
	    }
	
	    public void setGoodsId(Long goodsId) {
	        this.goodsId = goodsId;
	    }
	
	    public String getGcPicUrl() {
	        return gcPicUrl;
	    }
	
	    public void setGcPicUrl(String gcPicUrl) {
	        this.gcPicUrl = gcPicUrl;
	    }
	
	    public String getGcThumbUrl() {
	        return gcThumbUrl;
	    }
	
	    public void setGcThumbUrl(String gcThumbUrl) {
	        this.gcThumbUrl = gcThumbUrl;
	    }
	
	    public Long getGcOrder() {
	        return gcOrder;
	    }
	
	    public void setGcOrder(Long gcOrder) {
	        this.gcOrder = gcOrder;
	    }
	}


**GoodsDetail:**

	package com.wzy.springboot_seckill.entity;
	
	public class GoodsDetail {
	    private Long gdId;
	    private Long goodsId;
	    private String gdPicUrl;
	    private Integer gdOrder;
	
	    public Long getGdId() {
	        return gdId;
	    }
	
	    public void setGdId(Long gdId) {
	        this.gdId = gdId;
	    }
	
	    public Long getGoodsId() {
	        return goodsId;
	    }
	
	    public void setGoodsId(Long goodsId) {
	        this.goodsId = goodsId;
	    }
	
	    public String getGdPicUrl() {
	        return gdPicUrl;
	    }
	
	    public void setGdPicUrl(String gdPicUrl) {
	        this.gdPicUrl = gdPicUrl;
	    }
	
	    public Integer getGdOrder() {
	        return gdOrder;
	    }
	
	    public void setGdOrder(Integer gdOrder) {
	        this.gdOrder = gdOrder;
	    }
	}


**GoodsParam:**

	package com.wzy.springboot_seckill.entity;
	
	public class GoodsParam {
	    private Long gpId;
	    private String gpParamName;
	    private String gpParamValue;
	    private Long goodsId;
	    private Integer gpOrder;
	
	    public Long getGpId() {
	        return gpId;
	    }
	
	    public void setGpId(Long gpId) {
	        this.gpId = gpId;
	    }
	
	    public String getGpParamName() {
	        return gpParamName;
	    }
	
	    public void setGpParamName(String gpParamName) {
	        this.gpParamName = gpParamName;
	    }
	
	    public String getGpParamValue() {
	        return gpParamValue;
	    }
	
	    public void setGpParamValue(String gpParamValue) {
	        this.gpParamValue = gpParamValue;
	    }
	
	    public Long getGoodsId() {
	        return goodsId;
	    }
	
	    public void setGoodsId(Long goodsId) {
	        this.goodsId = goodsId;
	    }
	
	    public Integer getGpOrder() {
	        return gpOrder;
	    }
	
	    public void setGpOrder(Integer gpOrder) {
	        this.gpOrder = gpOrder;
	    }
	}


**GoodsService:**


	package com.wzy.springboot_seckill.service;
	
	
	import com.wzy.springboot_seckill.dao.GoodsCoverDAO;
	import com.wzy.springboot_seckill.dao.GoodsDAO;
	import com.wzy.springboot_seckill.dao.GoodsDetailDAO;
	import com.wzy.springboot_seckill.dao.GoodsParamDAO;
	import com.wzy.springboot_seckill.entity.Goods;
	import com.wzy.springboot_seckill.entity.GoodsCover;
	import com.wzy.springboot_seckill.entity.GoodsDetail;
	import com.wzy.springboot_seckill.entity.GoodsParam;
	import org.springframework.stereotype.Service;
	
	import javax.annotation.Resource;
	import java.util.List;
	
	@Service
	public class GoodsService {
	    @Resource
	    private GoodsDAO goodsDAO;
	    @Resource
	    private GoodsCoverDAO goodsCoverDAO;
	    @Resource
	    private GoodsDetailDAO goodsDetailDAO;
	    @Resource
	    private GoodsParamDAO goodsParamDAO;
	    //view -> controller -> service -> dao
	    public Goods getGoods(Long goodsId) {
	        return goodsDAO.findById(goodsId);
	    }
	
	    public List<GoodsCover> findCovers(Long goodsId){
	        return goodsCoverDAO.findByGoodsId(goodsId);
	    }
	
	    public List<GoodsDetail> findDetails(Long goodsId){
	        return  goodsDetailDAO.findByGoodsId(goodsId);
	    }
	
	    public List<GoodsParam> findParams(Long goodsId){
	        List list =  goodsParamDAO.findByGoodsId(goodsId);
	        return list;
	    }
	
	}



**SpringbootSeckillApplication:**

	package com.wzy.springboot_seckill;
	
	import org.mybatis.spring.annotation.MapperScan;
	import org.springframework.boot.SpringApplication;
	import org.springframework.boot.autoconfigure.SpringBootApplication;
	
	@SpringBootApplication
	@MapperScan("com.wzy.springboot_seckill")
	public class SpringbootSeckillApplication {
	
	    public static void main(String[] args) {
	        SpringApplication.run(SpringbootSeckillApplication.class, args);
	    }
	
	}


**pom.xml:**
	
	<?xml version="1.0" encoding="UTF-8"?>
	<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd">
	    <modelVersion>4.0.0</modelVersion>
	    <parent>
	        <groupId>org.springframework.boot</groupId>
	        <artifactId>spring-boot-starter-parent</artifactId>
	        <version>2.2.1.RELEASE</version>
	        <relativePath/> <!-- lookup parent from repository -->
	    </parent>
	    <groupId>com.wzy</groupId>
	    <artifactId>springboot_seckill</artifactId>
	    <version>0.0.1-SNAPSHOT</version>
	    <name>springboot_seckill</name>
	    <description>Demo project for Spring Boot</description>
	
	    <properties>
	        <java.version>1.8</java.version>
	    </properties>
	
	    <dependencies>
	        <dependency>
	            <groupId>org.springframework.boot</groupId>
	            <artifactId>spring-boot-starter</artifactId>
	        </dependency>
	
	        <dependency>
	            <groupId>org.springframework.boot</groupId>
	            <artifactId>spring-boot-starter-test</artifactId>
	            <scope>test</scope>
	            <exclusions>
	                <exclusion>
	                    <groupId>org.junit.vintage</groupId>
	                    <artifactId>junit-vintage-engine</artifactId>
	                </exclusion>
	            </exclusions>
	        </dependency>
	        <dependency>
	            <groupId>org.springframework.boot</groupId>
	            <artifactId>spring-boot-starter-freemarker</artifactId>
	        </dependency>
	        <dependency>
	            <groupId>org.springframework.boot</groupId>
	            <artifactId>spring-boot-starter-web</artifactId>
	        </dependency>
	        <dependency>
	            <groupId>org.springframework.boot</groupId>
	            <artifactId>spring-boot-devtools</artifactId>
	            <optional>true</optional>
	        </dependency>
	        <dependency>
	            <groupId>mysql</groupId>
	            <artifactId>mysql-connector-java</artifactId>
	            <scope>runtime</scope>
	        </dependency>
	        <dependency>
	            <groupId>org.mybatis.spring.boot</groupId>
	            <artifactId>mybatis-spring-boot-starter</artifactId>
	            <version>1.3.2</version>
	        </dependency>
	    </dependencies>
	
	    <build>
	        <plugins>
	            <plugin>
	                <groupId>org.springframework.boot</groupId>
	                <artifactId>spring-boot-maven-plugin</artifactId>
	            </plugin>
	        </plugins>
	    </build>
	
	</project>




## JMeter 设置 

###设置线程组

![](../Images/2.png)

![](../Images/3.png)

###设置Http请求

![](../Images/4.png)

![](../Images/5.png)

###设置报告

![](../Images/6.png)

![](../Images/7.png)

###设置测试数据来源

![](../Images/8.png)

![](../Images/9.png)