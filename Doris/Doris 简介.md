# Doris 简介

## 适用于哪些场景


* 数据仓库建设
* OLAP/BI分析
* 用户行为分析
* 广告数据分析
* 系统监控分析
* 探针分析 APM(Application Performance Management





## 对比



| 对比 | Doris    | Hive     | MySQL    | ClickHouse |
| ---- | -------- | -------- | -------- | ---------- |
| 场景 | 实时分析 | 离线分析 | 事务     | 实时分析   |
| 延迟 | 毫秒~秒  | 分钟级   | 毫秒     | 毫秒       |
| 架构 | MPP      | 批处理   | 单机为主 | 单机为主   |
| Join | 强       | 弱       | 强       | 较弱       |
| 更新 | 支持     | 弱       | 强       | 弱         |

Doris 是面向实时分析的分布式数仓，而不是传统 OLTP 数据库。



## Doris 的架构

| 组件          | 作用                       |
| ------------- | -------------------------- |
| FE (Frontend) | 元数据管理、SQL 解析、调度 |
| BE (Backend)  | 数据存储、执行计算         |
| Broker        | 外部数据导入（可选）       |

```
Client → FE → 多个 BE 并行执行
```



### Doris 为什么查询快？

- 向量化执行引擎
- 列式存储
- MPP 并行计算
- 预聚合（Rollup / 物化视图）



### Doris 存储模型

| 模型      | 特点       | 使用场景 |
| --------- | ---------- | -------- |
| Duplicate | 不去重     | 明细日志 |
| Unique    | 按主键去重 | 用户画像 |
| Aggregate | 自动聚合   | 指标表   |



### Doris 如何保证高可用

- FE 多副本选主（Leader / Follower）
- BE 多副本存储
- 副本自动恢复
- 元数据自动同步



### Doris 查询慢如何优化

- 是否合理分区（时间分区）
- 分桶数是否合适
- 是否命中物化视图
- 是否扫描数据过多
- explain 查看执行计划



### 场景 1：每天写入 10 亿数据，如何设计 Doris 表？

- 按天分区
- Hash 分桶（如 user_id）
- Duplicate 模型存明细
- 指标层用 Aggregate 模型
- 冷热数据分层



### 场景 2：Doris 和 ClickHouse 怎么选？

ClickHouse 单机性能极强，但分布式和高并发较弱；Doris 更适合多用户、高并发 BI 场景。



## 场景 3：Doris 能否做实时数仓？

可以，常见架构是 Kafka → Flink → Doris，实现分钟级甚至秒级数据可见。



