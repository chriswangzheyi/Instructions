# Hive调优

##化的核心思想

* 减少数据量（例如分区、列剪裁）
* 避免数据倾斜（例如加参数、Key打散）
* 避免全表扫描（例如on添加加上分区等）
* 减少job数（例如相同的on条件的join放在一起作为一个任务）

## 大小表的join

写有Join操作的查询语句时有一条原则：应该将条目少的表/子查询放在Join操作符的左边。原因是在Join操作的Reduce阶段，位于Join操作符左边的表的内容会被加载进内存，将条目少的表放在左边，可以有效减少发生OOM错误的几率。

但新版的hive已经对小表JOIN大表和大表JOIN小表进行了优化。小表放在左边和右边已经没有明显区别。

不过在做join的过程中通过小表在前可以适当地减少数据量，提高效率