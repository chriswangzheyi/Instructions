# 自注意力机制



## 为什么要用自注意力机制



![](Images/23.png)

没有注意力机制前，it指代animal 还是street 在算法层面不好得出结论。右图是通过自注意力机制计算得到，the animal 是指代it。颜色越深权重越大。



## 怎么计算



![](Images/24.png)

Query 是编码器前一时刻状态，Key是当前状态。



![](Images/25.png)





![](Images/26.png)



![](Images/27.png)





![](Images/28.png)



![](Images/29.png)

